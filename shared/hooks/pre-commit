#!/bin/bash
# Pre-commit hook to warn about editing ro-shared-ddl folder

if git diff --cached --name-only | grep -q "^ro-shared-ddl/"; then
    echo ""
    echo "⚠️  WARNING: You're trying to commit changes to ro-shared-ddl/"
    echo "   This folder is managed by the parent repository (shared-flyway-ddl)."
    echo "   Changes here will be overwritten during sync!"
    echo ""
    echo "   To make changes:"
    echo "   1. Edit files in: shared-flyway-ddl/shared/"
    echo "   2. Run: git pubshared"
    echo "   3. Run sync script to update all children"
    echo ""
    echo "   Continue with this commit anyway? (y/N)"
    read -r response
    if [[ ! "$response" =~ ^[Yy]$ ]]; then
        echo "Commit cancelled."
        exit 1
    fi
fi